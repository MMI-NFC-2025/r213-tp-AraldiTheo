---
import Layout from '../layouts/Layout.astro';
import OffreCard from '../components/OffreCard.astro';
import maison1 from '../assets/maison1.jpg';
import maison3 from '../assets/maison3.jpg';
import maison4 from '../assets/maison4.jpg';

const offres = [
    {
        "adresse": "2821 Lake Sevilla, Palm Harbor, TX",
        "favori": true,
        "id": "64l3n8nar836i5j",
        "nbChambres": 4,
        "nbSdb": 2,
        "nomMaison": "Beverly Springfield",
        "prix": 2700,
        "surface": 45,
        "img": maison3,
    },
    {
        "adresse": "2699 Green Valley, Highland Lake",
        "favori": true,
        "id": "lo831zeg10hpm9y",
        "nbChambres": 4,
        "nbSdb": 2,
        "nomMaison": "Palm Harbor",
        "prix": 2095,
        "surface": 42,
        "img": maison1
    },
    {
        "adresse": "909 Woodland St, Michigan, IN",
        "favori": false,
        "id": "s1zuhj19x8eb242",
        "nbChambres": 4,
        "nbSdb": 3,
        "nomMaison": "Faulkner Ave",
        "prix": 4550,
        "surface": 80,
        "img": maison4
    }
]
---

<Layout titre="Offres">
	<h1 class="text-3xl font-bold mb-8">Offres</h1>
	
	<button id="favori-button" class="bg-slate-600 rounded-lg text-white p-2 mb-6 hover:bg-slate-700 transition-colors">
		Afficher les favoris
	</button>
	
	<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
		{offres.map((offre) => (
			<div class="offre" data-favori={offre.favori.toString()}>
				<OffreCard 
					id={offre.id}
					nomMaison={offre.nomMaison}
					adresse={offre.adresse}
					prix={offre.prix}
					nbChambres={offre.nbChambres}
					nbSdb={offre.nbSdb}
					surface={offre.surface}
					imgUrl={offre.img}
					favori={offre.favori}
				/>
			</div>
		))}
	</div>
</Layout>

<script>
	const button = document.getElementById('favori-button');
	let showOnlyFavorites = false;
	
	button?.addEventListener('click', () => {
		showOnlyFavorites = !showOnlyFavorites;
		const offres = document.querySelectorAll('.offre');
		
		offres.forEach(offre => {
			const isFavori = offre.dataset.favori === 'true';
			
			if (showOnlyFavorites) {
				offre.style.display = isFavori ? 'block' : 'none';
				button.textContent = 'Afficher tout';
			} else {
				offre.style.display = 'block';
				button.textContent = 'Afficher les favoris';
			}
		});
	});
</script>
